(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{6973:function(e,t,r){Promise.resolve().then(r.bind(r,8984))},8984:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var a=r(7437),s=r(2265),o=r(712),n=r(2381),d=r(279),l=r(3804),i=r(9397),c=r(3247),u=r(5675),m=r(8930),f=r(3639),x=r(5060),p=r(3448);let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,p.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});h.displayName="Textarea";var g=r(4291),j=r(4438);function N(e){let{onSubmitSuccess:t,trigger:r,productId:l}=e,[c,u]=(0,s.useState)(!1),[m,f]=(0,s.useState)({product_code:"",name:"",name_short:"",barcode:"",description:""}),p=!!l;(0,s.useEffect)(()=>{l&&c&&(0,o.invoke)("get_product",{id:l}).then(e=>{f(e)}).catch(e=>{console.error("Erro ao carregar produto:",e),j.Am.error("Erro ao carregar produto",{description:String(e)})})},[l,c]);let N=e=>{let{name:t,value:r}=e.target;f(e=>({...e,[t]:r,..."name"===t?{name_short:r.substring(0,20)}:{}}))},b=async e=>{e.preventDefault();try{if(p){let e=await (0,o.invoke)("update_product",{id:l,product:m});j.Am.success("Produto atualizado com sucesso"),f(e)}else await (0,o.invoke)("create_product",{product:m}),j.Am.success("Produto criado com sucesso");u(!1),null==t||t(),p||f({product_code:"",name:"",name_short:"",barcode:"",description:""})}catch(e){console.error("Erro:",e),j.Am.error(p?"Erro ao atualizar produto":"Erro ao criar produto",{description:String(e)})}};return(0,a.jsxs)(g.Vq,{open:c,onOpenChange:u,children:[(0,a.jsx)(g.hg,{asChild:!0,children:r||(0,a.jsxs)(n.z,{children:[(0,a.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),"Novo Produto"]})}),(0,a.jsxs)(g.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(g.fK,{children:[(0,a.jsxs)(g.$N,{children:[p?"Editar":"Novo"," Produto"]}),(0,a.jsx)(g.Be,{children:"Preencha os dados do produto. O c\xf3digo de barras ser\xe1 gerado automaticamente."})]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"name",children:"Nome"}),(0,a.jsx)(d.I,{id:"name",name:"name",value:m.name,onChange:N,placeholder:"Nome completo do produto",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"name_short",children:"Nome Abreviado"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.I,{id:"name_short",name:"name_short",value:m.name_short,onChange:N,maxLength:20,placeholder:"Nome para etiqueta",required:!0,className:"pr-16"}),(0,a.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",children:[m.name_short.length,"/20"]})]}),(0,a.jsx)("p",{className:"text-[0.8rem] text-muted-foreground",children:"M\xe1ximo de 20 caracteres. Usado na impress\xe3o da etiqueta."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"product_code",children:"C\xf3digo do Produto"}),(0,a.jsx)(d.I,{id:"product_code",name:"product_code",value:m.product_code,onChange:N,placeholder:"Digite o c\xf3digo do produto",required:!0})]}),p&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"barcode",children:"C\xf3digo de Barras"}),(0,a.jsx)(d.I,{id:"barcode",name:"barcode",value:m.barcode,readOnly:!0,className:"bg-muted"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"description",children:"Descri\xe7\xe3o"}),(0,a.jsx)(h,{id:"description",name:"description",value:m.description||"",onChange:N,placeholder:"Descri\xe7\xe3o opcional do produto",className:"min-h-[100px] resize-y"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,a.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),(0,a.jsxs)(n.z,{type:"submit",children:[p?"Atualizar":"Criar"," Produto"]})]})]})]})]})}var b=r(767);function v(){let[e,t]=(0,s.useState)([]),[r,x]=(0,s.useState)(!0),[p,h]=(0,s.useState)(""),[g,v]=(0,s.useState)(!1),[y,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{_()},[]);let _=async()=>{try{let e=await (0,o.invoke)("get_products");t(e)}catch(e){console.error("Erro ao carregar produtos:",e),j.Am.error("Erro ao carregar produtos",{description:String(e)})}finally{x(!1)}},C=e=>{w(e),v(!0)},k=async()=>{if(null!==y)try{await (0,o.invoke)("delete_product",{id:y}),j.Am.success("Produto exclu\xeddo com sucesso"),await _()}catch(e){console.error("Erro ao excluir produto:",e),j.Am.error("Erro ao excluir produto",{description:String(e)})}finally{w(null),v(!1)}},z=e.filter(e=>e.product_code.toLowerCase().includes(p.toLowerCase()));return r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-pulse",children:"Carregando ..."})}):(0,a.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Produtos Cadastrados"}),(0,a.jsx)(N,{onSubmitSuccess:_,trigger:(0,a.jsxs)(n.z,{children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Novo Produto"]})})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,a.jsx)(d.I,{type:"search",placeholder:"Buscar por c\xf3digo do produto",className:"pl-8",value:p,onChange:e=>h(e.target.value)})]})}),(0,a.jsx)("div",{className:"border rounded-lg max-h-[480px] overflow-y-auto",children:(0,a.jsxs)(l.iA,{children:[(0,a.jsx)(l.xD,{children:(0,a.jsxs)(l.SC,{children:[(0,a.jsx)(l.ss,{children:"C\xf3digo do Produto"}),(0,a.jsx)(l.ss,{children:"C\xf3digo de Barras"}),(0,a.jsx)(l.ss,{children:"Nome"}),(0,a.jsx)(l.ss,{children:"Nome Abreviado"}),(0,a.jsx)(l.ss,{className:"w-[100px]",children:"A\xe7\xf5es"})]})}),(0,a.jsx)(l.RM,{children:z.length>0?z.map(e=>(0,a.jsxs)(l.SC,{children:[(0,a.jsx)(l.pj,{className:"font-medium",children:e.product_code}),(0,a.jsx)(l.pj,{className:"font-mono",children:e.barcode}),(0,a.jsx)(l.pj,{children:e.name}),(0,a.jsx)(l.pj,{children:e.name_short}),(0,a.jsx)(l.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N,{productId:e.id,onSubmitSuccess:_,trigger:(0,a.jsx)(n.z,{variant:"ghost",size:"sm",children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>C(e.id),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]})})]},e.id)):(0,a.jsx)(l.SC,{children:(0,a.jsx)(l.pj,{colSpan:5,className:"text-center text-muted-foreground py-6",children:p?"Nenhum produto encontrado":"Nenhum produto cadastrado"})})})]})}),(0,a.jsx)(b.aR,{open:g,onOpenChange:v,children:(0,a.jsxs)(b._T,{children:[(0,a.jsxs)(b.fY,{children:[(0,a.jsxs)(b.f$,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 text-destructive"}),"Confirmar exclus\xe3o"]}),(0,a.jsx)(b.yT,{children:"Tem certeza que deseja excluir este produto? Esta a\xe7\xe3o n\xe3o pode ser desfeita."})]}),(0,a.jsxs)(b.xo,{children:[(0,a.jsx)(b.le,{children:"Cancelar"}),(0,a.jsx)(b.OL,{onClick:k,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}},767:function(e,t,r){"use strict";r.d(t,{OL:function(){return h},_T:function(){return u},aR:function(){return l},f$:function(){return x},fY:function(){return m},le:function(){return g},xo:function(){return f},yT:function(){return p}});var a=r(7437),s=r(2265),o=r(7880),n=r(3448),d=r(2381);let l=o.fC;o.xz;let i=o.h_,c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.aV,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});c.displayName=o.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(i,{children:[(0,a.jsx)(c,{}),(0,a.jsx)(o.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",r),...s})]})});u.displayName=o.VY.displayName;let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};m.displayName="AlertDialogHeader";let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};f.displayName="AlertDialogFooter";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold",r),...s})});x.displayName=o.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});p.displayName=o.dk.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.aU,{ref:t,className:(0,n.cn)((0,d.d)(),r),...s})});h.displayName=o.aU.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.$j,{ref:t,className:(0,n.cn)((0,d.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});g.displayName=o.$j.displayName},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return i}});var a=r(7437),s=r(2265),o=r(7053),n=r(535),d=r(3448);let l=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:i=!1,...c}=e,u=i?o.g7:"button";return(0,a.jsx)(u,{className:(0,d.cn)(l({variant:s,size:n,className:r})),ref:t,...c})});i.displayName="Button"},4291:function(e,t,r){"use strict";r.d(t,{$N:function(){return p},Be:function(){return h},Vq:function(){return l},cN:function(){return x},cZ:function(){return m},fK:function(){return f},hg:function(){return i}});var a=r(7437),s=r(2265),o=r(6100),n=r(2489),d=r(3448);let l=o.fC,i=o.xz,c=o.h_;o.x8;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});u.displayName=o.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(o.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg overflow-hidden",r),...l,children:[s,(0,a.jsxs)(o.x8,{className:"absolute right-4 top-2 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=o.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let x=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};x.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});p.displayName=o.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...s})});h.displayName=o.dk.displayName},279:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(7437),s=r(2265),o=r(3448);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},5060:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var a=r(7437),s=r(2265),o=r(6394),n=r(535),d=r(3448);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.f,{ref:t,className:(0,d.cn)(l(),r),...s})});i.displayName=o.f.displayName},3804:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return i},iA:function(){return n},pj:function(){return u},ss:function(){return c},xD:function(){return d}});var a=r(7437),s=r(2265),o=r(3448);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",r),...s})})});n.displayName="Table";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",r),...s})});d.displayName="TableHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",r),...s})});l.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});i.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var a=r(1994),s=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[583,233,100,286,971,117,744],function(){return e(e.s=6973)}),_N_E=e.O()}]);