(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7761:function(e,r,a){Promise.resolve().then(a.t.bind(a,4811,23)),Promise.resolve().then(a.bind(a,4438)),Promise.resolve().then(a.t.bind(a,2778,23)),Promise.resolve().then(a.bind(a,4630)),Promise.resolve().then(a.bind(a,7314)),Promise.resolve().then(a.bind(a,4463))},8728:function(e,r,a){"use strict";a.d(r,{Z:function(){return t}});let t=(0,a(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9376:function(e,r,a){"use strict";var t=a(5475);a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}})},7314:function(e,r,a){"use strict";a.d(r,{UpdateChecker:function(){return m}});var t,o,n=a(2265),s=a(7502),i=a(712);async function c(e,r){return(0,s.Z)({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:r}})}async function l(e,r,a){return(0,s.Z)({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:r,handler:(0,i.BP)(a)}}).then(r=>async()=>c(e,r))}async function d(e,r){return l(e,null,r)}(t=o||(o={})).WINDOW_RESIZED="tauri://resize",t.WINDOW_MOVED="tauri://move",t.WINDOW_CLOSE_REQUESTED="tauri://close-requested",t.WINDOW_CREATED="tauri://window-created",t.WINDOW_DESTROYED="tauri://destroyed",t.WINDOW_FOCUS="tauri://focus",t.WINDOW_BLUR="tauri://blur",t.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",t.WINDOW_THEME_CHANGED="tauri://theme-changed",t.WINDOW_FILE_DROP="tauri://file-drop",t.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",t.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",t.MENU="tauri://menu",t.CHECK_UPDATE="tauri://update",t.UPDATE_AVAILABLE="tauri://update-available",t.INSTALL_UPDATE="tauri://update-install",t.STATUS_UPDATE="tauri://update-status",t.DOWNLOAD_PROGRESS="tauri://update-download-progress";var u=a(4438);let p=null,f=null,h=null;function m(){let[e,r]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let t;async function o(){try{console.log("Verificando atualiza\xe7\xf5es via backend..."),await (0,i.dw)("check_update_from_backend")}catch(e){console.error("Erro ao verificar atualiza\xe7\xf5es:",e)}}function n(e){let r=Date.now();if(h){console.log("J\xe1 existe um toast ativo, ignorando.");return}if(p===e.version&&f&&r-f<72e5){console.log("Notifica\xe7\xe3o para vers\xe3o ".concat(e.version," em cooldown, ignorando."));return}p=e.version,f=r,h=(0,u.A)("Nova atualiza\xe7\xe3o dispon\xedvel",{description:"Vers\xe3o ".concat(e.version," dispon\xedvel para instala\xe7\xe3o."),action:{label:"Instalar",onClick:()=>{a(),h=null}},duration:1e4,onDismiss:()=>{h=null,console.log("Toast fechado. Pr\xf3xima notifica\xe7\xe3o poss\xedvel em 2 horas.")}})}(async()=>{let e=await d("update-manual-check",e=>{console.log("Nova atualiza\xe7\xe3o dispon\xedvel (verifica\xe7\xe3o manual):",e.payload),n(e.payload)}),a=await d("update-startup-notification",e=>{console.log("Nova atualiza\xe7\xe3o dispon\xedvel (inicializa\xe7\xe3o):",e.payload),n(e.payload)}),t=await d("update-pending",()=>{r(!0),u.A.loading("Baixando atualiza\xe7\xe3o...")}),o=await d("update-installed",()=>{r(!1),u.A.success("Atualiza\xe7\xe3o instalada com sucesso! O aplicativo ser\xe1 reiniciado."),p=null,f=null}),s=await d("update-error",e=>{r(!1),u.A.error("Erro na atualiza\xe7\xe3o: ".concat(e.payload.error))});return()=>{e(),a(),t(),o(),s()}})().then(e=>{t=e,o()});let s=setInterval(()=>{e||h||o()},216e5);return()=>{clearInterval(s),t&&t()}},[e]);let a=async()=>{if(!e)try{r(!0);let e=u.A.loading("Iniciando atualiza\xe7\xe3o...");await (0,i.dw)("install_update_from_backend").catch(a=>{throw console.error("Erro ao instalar atualiza\xe7\xe3o:",a),u.A.error("".concat(a),{id:e}),r(!1),a})}catch(e){console.error("Falha na atualiza\xe7\xe3o:",e)}};return null}},4630:function(e,r,a){"use strict";a.d(r,{Sidebar:function(){return y}});var t=a(7437),o=a(2381),n=a(9763);let s=(0,n.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var i=a(7625);let c=(0,n.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),l=(0,n.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var d=a(8728),u=a(7648),p=a(9376),f=a(2265);let h=(0,n.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),m=(0,n.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function g(){let[e,r]=(0,f.useState)("light");return(0,f.useEffect)(()=>{let e=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,t=e||(a?"dark":"light");r(t),document.documentElement.setAttribute("data-theme",t)},[]),(0,t.jsx)(o.z,{variant:"ghost",className:"w-full justify-start",onClick:()=>{let a="light"===e?"dark":"light";r(a),document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a)},children:"light"===e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{className:"mr-2 h-4 w-4"}),"Modo Escuro"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{className:"mr-2 h-4 w-4"}),"Modo Claro"]})})}let v=[{title:"In\xedcio",href:"/",icon:s},{title:"Impress\xe3o",href:"/impressao",icon:i.Z},{title:"Produtos",href:"/produtos",icon:c},{title:"Dashboard",href:"/dashboard",icon:l},{title:"Configura\xe7\xf5es",href:"/configuracoes",icon:d.Z}];function y(){let e=(0,p.usePathname)();return(0,t.jsxs)("div",{className:"w-64 bg-background border-r fixed inset-y-0 left-0 flex flex-col",children:[(0,t.jsx)("div",{className:"h-14 bg-primary text-primary-foreground flex items-center px-6",children:(0,t.jsx)("span",{className:"font-semibold",children:"Sistema de Impress\xe3o de Etiquetas"})}),(0,t.jsx)("div",{className:"p-4 flex flex-col gap-1",children:v.map(r=>(0,t.jsx)(u.default,{href:r.href,children:(0,t.jsxs)(o.z,{variant:e===r.href?"secondary":"ghost",className:"w-full justify-start",children:[(0,t.jsx)(r.icon,{className:"mr-2 h-4 w-4"}),r.title]})},r.href))}),(0,t.jsx)("div",{className:"flex-grow"}),(0,t.jsx)("div",{className:"p-4 border-t",children:(0,t.jsx)(g,{})})]})}},2381:function(e,r,a){"use strict";a.d(r,{d:function(){return c},z:function(){return l}});var t=a(7437),o=a(2265),n=a(7053),s=a(535),i=a(3448);let c=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,r)=>{let{className:a,variant:o,size:s,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,t.jsx)(u,{className:(0,i.cn)(c({variant:o,size:s,className:a})),ref:r,...d})});l.displayName="Button"},4463:function(e,r,a){"use strict";a.d(r,{G:function(){return u},PrinterProvider:function(){return d}});var t=a(7437),o=a(2265),n=a(712),s=a(4438);let i=(0,o.createContext)(void 0),c=(e,r)=>{try{return localStorage.setItem(e,r),!0}catch(r){return console.error("Erro ao salvar ".concat(e," no localStorage:"),r),!1}},l=e=>{try{return localStorage.getItem(e)}catch(r){return console.error("Erro ao ler ".concat(e," do localStorage:"),r),null}};function d(e){let{children:r}=e,[a,d]=(0,o.useState)([]),[u,p]=(0,o.useState)(""),[f,h]=(0,o.useState)({darkness:8,width:840,height:176,speed:2,port:"Windows"}),[m,g]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1),_=(e,r)=>{d(e),r&&e.includes(r)?(console.log("Usando impressora salva:",r),p(r)):!u&&e.length>0&&(console.log("Selecionando primeira impressora dispon\xedvel:",e[0]),p(e[0])),c("cachedPrinters",JSON.stringify(e)),c("printersCacheTime",Date.now().toString())},w=async e=>{console.log("Definindo impressora selecionada:",e),p(e),c("selectedPrinter",e);try{let r={...f,port:"Windows",selected_printer:e};return console.log("Salvando configura\xe7\xe3o com impressora:",r),await (0,n.dw)("save_printer_settings",{config:r}),await (0,n.dw)("connect_printer",{config:r,printerName:e}),console.log("Impressora salva e conectada com sucesso:",e),!0}catch(e){return console.error("Erro ao salvar impressora nas configura\xe7\xf5es:",e),!1}},E=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];arguments.length>1&&void 0!==arguments[1]&&arguments[1];let r=l("cachedPrinters"),a=l("printersCacheTime"),t=a?Date.now()-Number.parseInt(a):Number.POSITIVE_INFINITY;if(r&&t<3e5)try{let a=JSON.parse(r);if(Array.isArray(a)&&a.length>0&&(_(a,f.selected_printer||l("selectedPrinter")),t<3e4&&!e))return}catch(e){console.error("Erro ao processar cache de impressoras:",e)}try{let r=await (0,n.dw)("list_printers",{silent:!0});_(r,f.selected_printer||l("selectedPrinter")),0===r.length?e&&s.A.error("Nenhuma impressora encontrada no Windows",{description:"Instale uma impressora no Windows para continuar."}):e&&s.A.success("Impressoras encontradas!",{description:"".concat(r.length," impressora(s) dispon\xedvel(is)")})}catch(r){console.error("Erro ao procurar impressoras:",r),e&&s.A.error("Erro ao procurar impressoras",{description:String(r)})}},x=async()=>{try{console.log("Carregando configura\xe7\xf5es salvas...");let e=await (0,n.dw)("get_printer_settings");if(e){if(console.log("Configura\xe7\xf5es carregadas:",e),h(e),e.selected_printer)console.log("Impressora salva encontrada nas configura\xe7\xf5es:",e.selected_printer),p(e.selected_printer),c("selectedPrinter",e.selected_printer);else{console.log("Nenhuma impressora salva nas configura\xe7\xf5es");let r=l("selectedPrinter");if(r){console.log("Impressora encontrada no localStorage:",r),p(r);let a={...e,selected_printer:r};h(a),await (0,n.dw)("save_printer_settings",{config:a}),console.log("Configura\xe7\xf5es atualizadas com impressora do localStorage")}}}else{console.log("Nenhuma configura\xe7\xe3o salva encontrada");let e=l("selectedPrinter");if(e){console.log("Impressora encontrada no localStorage:",e),p(e);let r={...f,selected_printer:e};h(r),await (0,n.dw)("save_printer_settings",{config:r}),console.log("Novas configura\xe7\xf5es criadas com impressora do localStorage")}}}catch(r){console.error("Erro ao carregar configura\xe7\xf5es:",r);let e=l("selectedPrinter");e&&(console.log("Usando impressora do localStorage ap\xf3s erro:",e),p(e))}},N=async()=>{if(!u){s.A.error("Nenhuma impressora selecionada",{description:"Selecione uma impressora primeiro"});return}g(!0);try{let e={...f,port:"Windows",selected_printer:u};console.log("Salvando configura\xe7\xf5es completas:",e),await (0,n.dw)("save_printer_settings",{config:e}),await (0,n.dw)("connect_printer",{config:e,printerName:u}),c("selectedPrinter",u),s.A.success("Configura\xe7\xf5es salvas!",{description:"Par\xe2metros de impress\xe3o atualizados."})}catch(e){console.error("Erro ao salvar configura\xe7\xf5es:",e),s.A.error("Erro ao salvar configura\xe7\xf5es",{description:String(e)})}finally{g(!1)}},b=async()=>{if(!u){s.A.error("Nenhuma impressora selecionada",{description:"Selecione uma impressora primeiro"});return}try{await (0,n.dw)("print_test",{printerName:u}),s.A.success("Teste enviado!",{description:"Verifique a impressora"})}catch(e){s.A.error("Erro ao imprimir teste",{description:String(e)})}},k=async()=>{try{return await (0,n.dw)("is_printer_connected")}catch(e){return console.error("Erro ao verificar conex\xe3o da impressora:",e),!1}};return(0,o.useEffect)(()=>{v||(async()=>{g(!0);try{await x(),await E(!1,!0)}catch(e){console.error("Erro na inicializa\xe7\xe3o:",e)}finally{g(!1),y(!0)}})()},[v]),(0,t.jsx)(i.Provider,{value:{printers:a,selectedPrinter:u,config:f,loading:m,searchPrinters:E,setSelectedPrinter:w,saveConfig:N,testPrint:b,updateConfig:e=>{h(r=>({...r,...e}))},isPrinterConnected:k},children:r})}function u(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("usePrinter must be used within a PrinterProvider");return e}},3448:function(e,r,a){"use strict";a.d(r,{cn:function(){return n}});var t=a(1994),o=a(3335);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,o.m6)((0,t.W)(r))}},2778:function(){},4811:function(e){e.exports={style:{fontFamily:"'__Inter_a780dc', '__Inter_Fallback_a780dc'",fontStyle:"normal"},className:"__className_a780dc"}},7502:function(e,r,a){"use strict";a.d(r,{Z:function(){return o}});var t=a(712);async function o(e){return(0,t.dw)("tauri",e)}}},function(e){e.O(0,[2,583,598,676,971,117,744],function(){return e(e.s=7761)}),_N_E=e.O()}]);